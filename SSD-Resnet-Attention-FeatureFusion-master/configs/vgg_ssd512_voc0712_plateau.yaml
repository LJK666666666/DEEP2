# VGG SSD512 + ReduceLROnPlateau 学习率调度
# 基于验证集 mAP 自适应调整学习率
#
# 训练命令 (必须配合 --eval_step 使用):
#   python train.py --config-file configs/vgg_ssd512_voc0712_plateau.yaml --eval_step 2500

MODEL:
  NUM_CLASSES: 21
  BACKBONE:
    OUT_CHANNELS: (512, 1024, 512, 256, 256, 256, 256)
  PRIORS:
    FEATURE_MAPS: [64, 32, 16, 8, 4, 2, 1]
    STRIDES: [8, 16, 32, 64, 128, 256, 512]
    MIN_SIZES: [35.84, 76.8, 153.6, 230.4, 307.2, 384.0, 460.8]
    MAX_SIZES: [76.8, 153.6, 230.4, 307.2, 384.0, 460.8, 537.65]
    ASPECT_RATIOS: [[2], [2, 3], [2, 3], [2, 3], [2, 3], [2], [2]]
    BOXES_PER_LOCATION: [4, 6, 6, 6, 6, 4, 4]
INPUT:
  IMAGE_SIZE: 512
DATASETS:
  TRAIN: ("voc_2007_trainval", "voc_2007_test", )
  TEST: ("voc_2012_trainval", )
SOLVER:
  MAX_ITER: 40000
  BATCH_SIZE: 64
  LR: 0.001
  # ReduceLROnPlateau 配置
  LR_SCHEDULER: "ReduceLROnPlateau"
  PLATEAU_PATIENCE: 3       # 连续 n 次评估无提升后降低学习率
  PLATEAU_FACTOR: 0.3       # 学习率衰减
  PLATEAU_MIN_LR: 1e-6      # 最小学习率

OUTPUT_DIR: 'outputs/vgg_ssd512_voc0712_plateau'
